<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OLS Viikkopelit</title>
    <link rel="stylesheet" href="/css/style.css">
</head>

<body class="bg-gray-100 text-gray-800 font-sans">
    <div class="container mx-auto p-4 md:p-8 max-w-3xl">
        <h1 class="text-3xl md:text-4xl font-bold text-blue-700 mb-6 text-center">OLS Viikkopelit</h1>

        <form method="GET" id="teamSelectionForm" class="mb-8">
            <label for="team" class="block text-lg font-medium text-gray-700 mb-2">Valitse joukkue:</label>
            <select name="teamName" id="team" onchange="if (this.value) { window.location.href = '/team/' + encodeURIComponent(this.value); } else { window.location.href = '/'; }" class="w-full p-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">-- Kaikki joukkueet --</option>
                <% teams.forEach(team => { %>
                    <option value="<%= team %>" <%= selectedTeam === team ? 'selected' : '' %>>
                        <%= team %>
                    </option>
                <% }); %>
            </select>
        </form>

        <% if (selectedTeam && gamesForTeam.length > 0) { %>
            <h2 class="text-2xl font-semibold text-blue-600 mb-4 text-center">
                <%= selectedTeam %> - Otteluohjelma
            </h2>
            <div class="space-y-6">
                <% gamesForTeam.forEach(game => { %>
                    <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300">
                        <p class="text-xl font-semibold text-gray-700 mb-1">
                            <span class="font-bold">Aika:</span>
                            <%= game.time %>
                        </p>
                        <p class="text-lg text-gray-600 mb-1">
                            <span class="font-bold">Vastustaja:</span>
                            <%= game.opponent %>
                        </p>
                        <p class="text-lg text-gray-600 mb-1">
                            <span class="font-bold">Kenttä:</span>
                            <%= game.field %>
                        </p>
                        <p class="text-sm text-gray-500">
                            <span class="font-bold">Info:</span>
                            <%= game.gameDuration %>,
                                <%= game.gameType %> (
                                    <%= game.year %>)
                        </p>
                    </div>
                    <% }); %>
            </div>
            <% } else if (selectedTeam) { %>
                <p class="text-center text-gray-500 mt-10 text-lg">Ei pelejä valitulle joukkueelle.</p>
                <% } %>
    </div>

    <script>
        // Optional: if you want to avoid the form action change and use JS for navigation
        // document.getElementById('teamSelect').addEventListener('change', function() {
        //     if (this.value) {
        //         window.location.href = '/team/' + encodeURIComponent(this.value);
        //     }
        // });
    </script>
</body>

</html>